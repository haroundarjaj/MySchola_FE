import{bG as G,y as P,bA as x,bD as M,bH as E,j as e,T as d,aA as k,aQ as I,bI as A,bJ as w,m as N,r as _,bE as V,an as H,bK as L,aE as O,B,bL as $,bM as Q,s as J,G as r,bN as W,bO as K,bP as U,D as X}from"./index-DCElUTP8.js";import{F as T,c as R,a as S,f as Y,I as Z,d as ee,b as te,A as se,e as re,g as ne}from"./AuthFooter-DEhTMBMX.js";import{D as ie}from"./Dialog-CycF5gpm.js";import{D as ae}from"./DialogContent-D95R0kEK.js";import{C as oe}from"./Checkbox-BBsVc2Bs.js";const le=G(P)(l=>({backgroundColor:"lightgrey",color:"black","&:hover":{backgroundColor:"primary",color:"white"}})),ce=({open:l,handleClose:i})=>{const n=x("authentication").t,f=x("general").t,{showNotification:m}=M(),a=E(s=>s.breakpoints.down("md")),y=(s,{setSubmitting:o})=>{o(!0),s.email===""?m("Insert a valid email to recieve the reset link!","error"):Y(s.email).then(c=>{m("A reset link have been sent to your email successfully.","success"),i()}).catch(c=>{console.log(c),m("bad request.","error")}),o(!1)},v=(s,o)=>{o!=="backdropClick"&&i()};return e.jsx(ie,{open:l,onClose:v,maxWidth:"sm",PaperProps:{sx:{borderRadius:10}},children:e.jsxs(ae,{sx:{p:a?5:10},children:[e.jsx(d,{variant:"h3",fontWeight:"600",sx:{mb:2},children:n("forgot_password_title")}),e.jsx(d,{variant:"h5",fontWeight:"300",sx:{mb:5},children:n("forgot_password_subtitle")}),e.jsx(T,{initialValues:{email:""},validationSchema:R().shape({email:S().email(n("valid_email_error")).max(255)}),onSubmit:y,children:({errors:s,handleBlur:o,handleSubmit:c,isSubmitting:p,touched:g,values:C,setFieldValue:D})=>e.jsxs("form",{noValidate:!0,onSubmit:c,children:[e.jsxs(k,{fullWidth:!0,error:!!(g.email&&s.email),sx:{mb:3},children:[e.jsx(I,{htmlFor:"outlined-adornment-email-register",children:n("email")}),e.jsx(A,{id:"outlined-adornment-email-register",type:"email",value:C.email,name:"email",label:n("email"),onBlur:o,onChange:t=>{D("email",t.target.value.toLowerCase())},inputProps:{}}),g.email&&s.email&&e.jsx(w,{error:!0,id:"standard-weight-helper-text--register",children:s.email})]}),e.jsx(P,{disableElevation:!0,disabled:p,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",sx:{mb:1},children:n("reset_password_title")}),e.jsx(le,{fullWidth:!0,size:"large",variant:"contained",onClick:i,sx:{backgroundColor:"lightgray",color:"black"},children:f("cancel")})]})})]})})},de=({...l})=>{const i=N(),[n,f]=_.useState(!0),m=V(),a=x("authentication").t,y=x("general").t,{showNotification:v}=M(),[s,o]=_.useState(!1),[c,p]=_.useState(!1),g=()=>{o(!s)},C=t=>{t.preventDefault()},D=async({email:t,password:j},{setSubmitting:u})=>{u(!0);try{await m(Q({email:t,password:j,isRemember:n})).unwrap().then(h=>{console.log(h)})}catch(h){v(y(h),"error")}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(ce,{open:c,handleClose:()=>p(!1)}),e.jsx(T,{initialValues:{email:"super@admin.com",password:"myScholaSuperAdmin"},validationSchema:R().shape({email:S().email(a("valid_email_error")).max(255).required(a("email_required")),password:S().max(255).required(a("password_required"))}),onSubmit:D,children:({errors:t,handleBlur:j,handleChange:u,handleSubmit:h,isSubmitting:q,touched:b,values:F})=>e.jsxs("form",{noValidate:!0,onSubmit:h,...l,children:[e.jsxs(k,{fullWidth:!0,error:!!(b.email&&t.email),sx:{...i.typography.customInput},children:[e.jsx(I,{htmlFor:"outlined-adornment-email-login",children:a("email")}),e.jsx(A,{id:"outlined-adornment-email-login",type:"email",value:F.email,name:"email",onBlur:j,onChange:u,label:"Email Address / Username",inputProps:{}}),b.email&&t.email&&e.jsx(w,{error:!0,id:"standard-weight-helper-text-email-login",children:t.email})]}),e.jsxs(k,{fullWidth:!0,error:!!(b.password&&t.password),sx:{...i.typography.customInput},children:[e.jsx(I,{htmlFor:"outlined-adornment-password-login",children:a("password")}),e.jsx(A,{id:"outlined-adornment-password-login",type:s?"text":"password",value:F.password,name:"password",onBlur:j,onChange:u,endAdornment:e.jsx(Z,{position:"end",children:e.jsx(H,{"aria-label":"toggle password visibility",onClick:g,onMouseDown:C,edge:"end",size:"large",children:s?e.jsx(ee,{}):e.jsx(te,{})})}),label:"Password",inputProps:{}}),b.password&&t.password&&e.jsx(w,{error:!0,id:"standard-weight-helper-text-password-login",children:t.password})]}),e.jsxs(L,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[e.jsx(O,{control:e.jsx(oe,{checked:n,onChange:z=>f(z.target.isRemember),name:"isRemember",color:"primary"}),label:a("remember_me")}),e.jsx(d,{variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},onClick:()=>p(!0),children:a("forgot_password")})]}),t.submit&&e.jsx(B,{sx:{mt:3},children:e.jsx(w,{error:!0,children:t.submit})}),e.jsx(B,{sx:{mt:2},children:e.jsx($,{children:e.jsx(P,{disableElevation:!0,disabled:q,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:a("sign_in")})})})]})})]})};J("div")(({theme:l})=>({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}));const ge=()=>{const l=E(n=>n.breakpoints.down("md")),i=x("authentication").t;return e.jsxs(se,{children:[e.jsx(r,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(r,{item:!0,xs:12,sm:5,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(re,{contentType:"login",children:e.jsxs(r,{container:!0,alignItems:"center",justifyContent:"center",children:[e.jsx(r,{container:!0,justifyContent:"center",alignItems:"center",sx:{mb:3},children:e.jsx(r,{item:!0,children:e.jsx(W,{to:"#","aria-label":"logo",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("img",{src:K,alt:"MySchola",width:"100"}),e.jsx("img",{src:U,alt:"MySchola",width:"100"})]})})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(r,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(r,{item:!0,children:e.jsxs(L,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(d,{color:"secondary.main",gutterBottom:!0,variant:l?"h3":"h2",children:i("login_title")}),e.jsx(d,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:i("login_subtitle")})]})})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(de,{})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(X,{})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(r,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:e.jsx(d,{component:W,to:"/register",variant:"subtitle1",sx:{textDecoration:"none"},children:i("dont_have_account")})})})]})})})}),e.jsx(ne,{})]})};export{ge as default};
